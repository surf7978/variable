<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>html/employeeForm2.html</title>
		<script src="showPage2.js"></script>
	</head>
	<body>
		<table>
			<tr>
				<td><input id="fName" type="text" name="fNmae" value="gildong" style="font-size: 25px;"></td>
				<td style="font-size: 25px; text-align:center;">First_Name</td>
				<td id="clickfName" style="background-color:silver; width:350px; height:20px; font-size: 25px;"></td>
			</tr>
			<tr>
				<td><input id="lName" type="text" name="lNmae" value="Hong" style="font-size: 25px;"></td>
				<td style="font-size: 25px; text-align:center;">Last_Nmae</td>
				<td id="clicklName" style="background-color:silver; width:350px; height:20px; font-size: 25px;"></td>
			</tr>
			<tr>
				<td><input id="email" type="text" name="email" value="HGD" style="font-size: 25px;"></td>
				<td style="font-size: 25px; text-align:center;">Email</td>
				<td id="clickemail" style="background-color:silver; width:350px; height:20px; font-size: 25px;"></td>
			</tr> 
			<tr>
				<td><input id="pNumber"type="text" name="pNumber" value="010.1111.2222" style="font-size: 25px;"></td>
				<td style="font-size: 25px; text-align:center;">Phone_Number</td>
				<td id="clickpNumber" style="background-color:silver; width:350px; height:20px; font-size: 25px;"></td>
			</tr>
			<tr>
				<td><input id="hireDate"type="text" name="hireDate" style="font-size: 25px;"></td>
				<td style="font-size: 25px; text-align:center;">Hire_Date</td>
				<td id="clickhireDate" style="background-color:silver; width:350px; height:20px; font-size: 25px;"></td>
			</tr>
			<tr>
				<td><input id="jId"type="text" name="jId" value="IT" style="font-size: 25px;"></td>
				<td style="font-size: 25px; text-align:center;">Job_Id</td>
				<td id="clickjId" style="background-color:silver; width:350px; height:20px; font-size: 25px;"></td>
			</tr>
			<tr>
				<td><input id="salary"type="text" name="salary" value="7000" style="font-size: 25px;"></td>
				<td style="font-size: 25px; text-align:center;">Salary</td>
				<td id="clicksalary" style="background-color:silver; width:350px; height:20px; font-size: 25px;"></td>
			</tr>
			<tr>
				<td><button id="btn" onclick="saveBtn()" style="padding:10px; text-align: center; font-size: 25px;">저장</button></td>
			</tr>
		</table>
		<div id="show"></div>
		<script>
			function saveBtn(){
				console.log(this);
				
				let fName = document.getElementById('fName').value;
				let lName = document.getElementById('lName').value;
				let email = document.getElementById('email').value;
				let pNumber = document.getElementById('pNumber').value;
				let jId = document.getElementById('jId').value;
				let salary = document.getElementById('salary').value;
				
				let saveReq = new XMLHttpRequest();
				
				let url = '../PutEmpServlet?fName='+fName+"&lName="+lName //
						+"&email="+email+"&pNumber="+pNumber //
						+"&salary="+salary+"&jId="+jId;
				saveReq.open('get', url);
				saveReq.send();
				saveReq.onload = function(){
					console.log(saveReq.responseXML);
					let doc = saveReq.responseXML;
					let result = doc.getElementsByTagName('result');
					console.log(result);
					console.log(result[0].childNodes);
					
					let trTag = document.createElement('tr');
					for(let i=0; i<result[0].childNodes.length; i++){
						let tdTag=document.createElement('td');
						tdTag.setAttribute('style', 'padding:10px; text-align: center; background-color:gold;');
						let val = result[0].childNodes[i].firstChild.nodeValue;
						let tNode = document.createTextNode(val);
						tdTag.appendChild(tNode);
						trTag.appendChild(tdTag);
					}
					document.getElementById('tbl').appendChild(trTag);
					
					//삭제버튼추가
					addBtn(trTag, delFunc)();
					
					
				}
			}
			
			let xhtp = new XMLHttpRequest();
			xhtp.open('get', '../home'); //home=Servlet파일명(내가 설정해준 것)의 경로를 지정해줘야함(../)
			xhtp.send();
			xhtp.onload = showPage;
			
			document.getElementById('hireDate').value = new Date().toISOString().substring(0, 10);
			
		</script>
	</body>
</html>